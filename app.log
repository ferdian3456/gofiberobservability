{"level":"info","time":"2026-02-11T08:16:11.411+0700","caller":"logger/logger.go:104","msg":"OpenTelemetry logger initialized","service":"gofiberobservability","version":"1.0.0","environment":"development","service":"gofiberobservability","version":"1.0.0","environment":"development","otlp_endpoint":"localhost:4317"}
{"level":"info","time":"2026-02-11T08:16:11.412+0700","caller":"tracer/tracer.go:90","msg":"OpenTelemetry tracer initialized","service":"gofiberobservability","version":"1.0.0","environment":"development","service":"gofiberobservability","version":"1.0.0","environment":"development","otlp_endpoint":"localhost:4317","sample_rate":1}
{"level":"info","time":"2026-02-11T08:16:11.412+0700","caller":"metrics/metrics.go:73","msg":"OpenTelemetry metrics initialized","service":"gofiberobservability","version":"1.0.0","environment":"development","otlp_endpoint":"localhost:4317","service":"gofiberobservability"}
{"level":"info","time":"2026-02-11T08:16:11.433+0700","caller":"database/postgres.go:46","msg":"PostgreSQL connection pool initialized","service":"gofiberobservability","version":"1.0.0","environment":"development","host":"localhost","port":5432,"database":"appdb","max_conns":25,"min_conns":5}
{"level":"info","time":"2026-02-11T08:16:11.439+0700","caller":"database/redis.go:38","msg":"Redis initialized","service":"gofiberobservability","version":"1.0.0","environment":"development","addr":"localhost:6379","db":0}
{"level":"info","time":"2026-02-11T08:16:11.441+0700","caller":"database/postgres.go:85","msg":"Database migrations completed","service":"gofiberobservability","version":"1.0.0","environment":"development"}
{"level":"info","time":"2026-02-11T08:16:11.442+0700","caller":"api/main.go:149","msg":"Starting server","service":"gofiberobservability","version":"1.0.0","environment":"development","port":"3002","prefork":false}

    _______ __
   / ____(_) /_  ___  _____
  / /_  / / __ \/ _ \/ ___/
 / __/ / / /_/ /  __/ /
/_/   /_/_.___/\___/_/          v3.0.0
--------------------------------------------------
INFO Server started on: 	http://127.0.0.1:3002 (bound on host 0.0.0.0 and port 3002)
INFO Application name: 		gofiberobservability
INFO Total handlers: 		23
INFO Prefork: 			Disabled
INFO PID: 			25296
INFO Total process count: 	1

{"level":"info","time":"2026-02-11T08:16:16.098+0700","caller":"middleware/logging.go:35","msg":"Incoming request","service":"gofiberobservability","version":"1.0.0","environment":"development","trace_id":"8da2ea48d94ded5ce14bd7b733ee3fb8","span_id":"55fb68eef239deed","http.method":"GET","http.route":"/","http.path":"/debug/panic","http.user_agent":"curl/8.5.0","http.client_ip":"127.0.0.1"}
{"level":"error","time":"2026-02-11T08:16:16.099+0700","caller":"middleware/recovery.go:37","msg":"Panic recovered","service":"gofiberobservability","version":"1.0.0","environment":"development","error":"THIS IS A TEST PANIC","stack":"goroutine 115 [running]:\nruntime/debug.Stack()\n\t/usr/local/go/src/runtime/debug/stack.go:26 +0x5e\nmain.main.RecoveryMiddleware.func9.1()\n\t/home/ferdian/Documents/gofiberobservability/internal/middleware/recovery.go:24 +0xfd\npanic({0x11a2780?, 0x1584e20?})\n\t/usr/local/go/src/runtime/panic.go:783 +0x132\ngo.opentelemetry.io/otel/sdk/trace.(*recordingSpan).End.deferwrap1()\n\t/home/ferdian/go/pkg/mod/go.opentelemetry.io/otel/sdk@v1.40.0/trace/span.go:478 +0x25\ngo.opentelemetry.io/otel/sdk/trace.(*recordingSpan).End(0xc0001a7c20, {0x0, 0x0, 0xc0004b8540?})\n\t/home/ferdian/go/pkg/mod/go.opentelemetry.io/otel/sdk@v1.40.0/trace/span.go:528 +0xd14\npanic({0x11a2780?, 0x1584e20?})\n\t/usr/local/go/src/runtime/panic.go:783 +0x132\nmain.main.func4({0x0?, 0xc0002a65c0?})\n\t/home/ferdian/Documents/gofiberobservability/cmd/api/main.go:114 +0x25\ngithub.com/gofiber/fiber/v3.(*App).next(0xc0001b1808, 0xc00016c008)\n\t/home/ferdian/go/pkg/mod/github.com/gofiber/fiber/v3@v3.0.0/router.go:160 +0x21d\ngithub.com/gofiber/fiber/v3.(*DefaultCtx).Next(0xc00016c018?)\n\t/home/ferdian/go/pkg/mod/github.com/gofiber/fiber/v3@v3.0.0/ctx.go:244 +0xa5\ngofiberobservability/internal/middleware.LoggingMiddleware.func1({0x15bcbd8, 0xc00016c008})\n\t/home/ferdian/Documents/gofiberobservability/internal/middleware/logging.go:44 +0x546\ngithub.com/gofiber/fiber/v3.(*DefaultCtx).Next(0xc0001e4b40?)\n\t/home/ferdian/go/pkg/mod/github.com/gofiber/fiber/v3@v3.0.0/ctx.go:237 +0x6e\ngofiberobservability/internal/middleware.TracingMiddleware.func1({0x15bcbd8, 0xc00016c008})\n\t/home/ferdian/Documents/gofiberobservability/internal/middleware/tracing.go:45 +0xc65\ngithub.com/gofiber/fiber/v3.(*DefaultCtx).Next(0xc?)\n\t/home/ferdian/go/pkg/mod/github.com/gofiber/fiber/v3@v3.0.0/ctx.go:237 +0x6e\nmain.main.RecoveryMiddleware.func9({0x15bcbd8?, 0xc00016c008?})\n\t/home/ferdian/Documents/gofiberobservability/internal/middleware/recovery.go:50 +0x68\ngithub.com/gofiber/fiber/v3.(*App).next(0xc0001b1808, 0xc00016c008)\n\t/home/ferdian/go/pkg/mod/github.com/gofiber/fiber/v3@v3.0.0/router.go:160 +0x21d\ngithub.com/gofiber/fiber/v3.(*App).requestHandler(0xc0001b1808, 0x4b8153?)\n\t/home/ferdian/go/pkg/mod/github.com/gofiber/fiber/v3@v3.0.0/router.go:336 +0x125\ngithub.com/valyala/fasthttp.(*Server).serveConn(0xc0001aa248, {0x15a3bb0, 0xc00007c1e8})\n\t/home/ferdian/go/pkg/mod/github.com/valyala/fasthttp@v1.69.0/server.go:2465 +0x124b\ngithub.com/valyala/fasthttp.(*workerPool).workerFunc(0xc000150090, 0xc0003f4200)\n\t/home/ferdian/go/pkg/mod/github.com/valyala/fasthttp@v1.69.0/workerpool.go:225 +0x92\ngithub.com/valyala/fasthttp.(*workerPool).getCh.func1()\n\t/home/ferdian/go/pkg/mod/github.com/valyala/fasthttp@v1.69.0/workerpool.go:197 +0x32\ncreated by github.com/valyala/fasthttp.(*workerPool).getCh in goroutine 102\n\t/home/ferdian/go/pkg/mod/github.com/valyala/fasthttp@v1.69.0/workerpool.go:196 +0x194\n","path":"/debug/panic","method":"GET","stacktrace":"main.main.RecoveryMiddleware.func9.1\n\t/home/ferdian/Documents/gofiberobservability/internal/middleware/recovery.go:37\nruntime.gopanic\n\t/usr/local/go/src/runtime/panic.go:783\ngo.opentelemetry.io/otel/sdk/trace.(*recordingSpan).End.deferwrap1\n\t/home/ferdian/go/pkg/mod/go.opentelemetry.io/otel/sdk@v1.40.0/trace/span.go:478\ngo.opentelemetry.io/otel/sdk/trace.(*recordingSpan).End\n\t/home/ferdian/go/pkg/mod/go.opentelemetry.io/otel/sdk@v1.40.0/trace/span.go:528\nruntime.gopanic\n\t/usr/local/go/src/runtime/panic.go:783\nmain.main.func4\n\t/home/ferdian/Documents/gofiberobservability/cmd/api/main.go:114\ngithub.com/gofiber/fiber/v3.(*App).next\n\t/home/ferdian/go/pkg/mod/github.com/gofiber/fiber/v3@v3.0.0/router.go:160\ngithub.com/gofiber/fiber/v3.(*DefaultCtx).Next\n\t/home/ferdian/go/pkg/mod/github.com/gofiber/fiber/v3@v3.0.0/ctx.go:244\ngofiberobservability/internal/middleware.LoggingMiddleware.func1\n\t/home/ferdian/Documents/gofiberobservability/internal/middleware/logging.go:44\ngithub.com/gofiber/fiber/v3.(*DefaultCtx).Next\n\t/home/ferdian/go/pkg/mod/github.com/gofiber/fiber/v3@v3.0.0/ctx.go:237\ngofiberobservability/internal/middleware.TracingMiddleware.func1\n\t/home/ferdian/Documents/gofiberobservability/internal/middleware/tracing.go:45\ngithub.com/gofiber/fiber/v3.(*DefaultCtx).Next\n\t/home/ferdian/go/pkg/mod/github.com/gofiber/fiber/v3@v3.0.0/ctx.go:237\nmain.main.RecoveryMiddleware.func9\n\t/home/ferdian/Documents/gofiberobservability/internal/middleware/recovery.go:50\ngithub.com/gofiber/fiber/v3.(*App).next\n\t/home/ferdian/go/pkg/mod/github.com/gofiber/fiber/v3@v3.0.0/router.go:160\ngithub.com/gofiber/fiber/v3.(*App).requestHandler\n\t/home/ferdian/go/pkg/mod/github.com/gofiber/fiber/v3@v3.0.0/router.go:336\ngithub.com/valyala/fasthttp.(*Server).serveConn\n\t/home/ferdian/go/pkg/mod/github.com/valyala/fasthttp@v1.69.0/server.go:2465\ngithub.com/valyala/fasthttp.(*workerPool).workerFunc\n\t/home/ferdian/go/pkg/mod/github.com/valyala/fasthttp@v1.69.0/workerpool.go:225\ngithub.com/valyala/fasthttp.(*workerPool).getCh.func1\n\t/home/ferdian/go/pkg/mod/github.com/valyala/fasthttp@v1.69.0/workerpool.go:197"}
{"level":"info","time":"2026-02-11T08:16:16.147+0700","caller":"middleware/logging.go:35","msg":"Incoming request","service":"gofiberobservability","version":"1.0.0","environment":"development","trace_id":"0dcfefa724423538b1dce5b6cb0f3861","span_id":"c2ca42dfcbbfd4ef","http.method":"GET","http.route":"/","http.path":"/debug/error","http.user_agent":"curl/8.5.0","http.client_ip":"127.0.0.1"}
{"level":"info","time":"2026-02-11T08:16:16.147+0700","caller":"middleware/logging.go:79","msg":"Request completed","service":"gofiberobservability","version":"1.0.0","environment":"development","trace_id":"0dcfefa724423538b1dce5b6cb0f3861","span_id":"c2ca42dfcbbfd4ef","http.method":"GET","http.route":"/debug/error","http.status_code":400,"http.request.duration_ms":0}
{"level":"error","time":"2026-02-11T08:16:16.147+0700","caller":"middleware/logging.go:88","msg":"Request error","service":"gofiberobservability","version":"1.0.0","environment":"development","trace_id":"0dcfefa724423538b1dce5b6cb0f3861","span_id":"c2ca42dfcbbfd4ef","http.method":"GET","http.path":"/debug/error","error":"This is a deliberate error","stacktrace":"gofiberobservability/internal/middleware.LoggingMiddleware.func1\n\t/home/ferdian/Documents/gofiberobservability/internal/middleware/logging.go:88\ngithub.com/gofiber/fiber/v3.(*DefaultCtx).Next\n\t/home/ferdian/go/pkg/mod/github.com/gofiber/fiber/v3@v3.0.0/ctx.go:237\ngofiberobservability/internal/middleware.TracingMiddleware.func1\n\t/home/ferdian/Documents/gofiberobservability/internal/middleware/tracing.go:45\ngithub.com/gofiber/fiber/v3.(*DefaultCtx).Next\n\t/home/ferdian/go/pkg/mod/github.com/gofiber/fiber/v3@v3.0.0/ctx.go:237\nmain.main.RecoveryMiddleware.func9\n\t/home/ferdian/Documents/gofiberobservability/internal/middleware/recovery.go:50\ngithub.com/gofiber/fiber/v3.(*App).next\n\t/home/ferdian/go/pkg/mod/github.com/gofiber/fiber/v3@v3.0.0/router.go:160\ngithub.com/gofiber/fiber/v3.(*App).requestHandler\n\t/home/ferdian/go/pkg/mod/github.com/gofiber/fiber/v3@v3.0.0/router.go:336\ngithub.com/valyala/fasthttp.(*Server).serveConn\n\t/home/ferdian/go/pkg/mod/github.com/valyala/fasthttp@v1.69.0/server.go:2465\ngithub.com/valyala/fasthttp.(*workerPool).workerFunc\n\t/home/ferdian/go/pkg/mod/github.com/valyala/fasthttp@v1.69.0/workerpool.go:225\ngithub.com/valyala/fasthttp.(*workerPool).getCh.func1\n\t/home/ferdian/go/pkg/mod/github.com/valyala/fasthttp@v1.69.0/workerpool.go:197"}
{"level":"error","time":"2026-02-11T08:16:16.147+0700","caller":"api/main.go:76","msg":"Request error","service":"gofiberobservability","version":"1.0.0","environment":"development","trace_id":"0dcfefa724423538b1dce5b6cb0f3861","span_id":"c2ca42dfcbbfd4ef","error":"This is a deliberate error","status_code":400,"path":"/debug/error","stacktrace":"main.main.func1\n\t/home/ferdian/Documents/gofiberobservability/cmd/api/main.go:76\ngithub.com/gofiber/fiber/v3.(*App).ErrorHandler\n\t/home/ferdian/go/pkg/mod/github.com/gofiber/fiber/v3@v3.0.0/app.go:1340\ngithub.com/gofiber/fiber/v3.(*App).requestHandler\n\t/home/ferdian/go/pkg/mod/github.com/gofiber/fiber/v3@v3.0.0/router.go:352\ngithub.com/valyala/fasthttp.(*Server).serveConn\n\t/home/ferdian/go/pkg/mod/github.com/valyala/fasthttp@v1.69.0/server.go:2465\ngithub.com/valyala/fasthttp.(*workerPool).workerFunc\n\t/home/ferdian/go/pkg/mod/github.com/valyala/fasthttp@v1.69.0/workerpool.go:225\ngithub.com/valyala/fasthttp.(*workerPool).getCh.func1\n\t/home/ferdian/go/pkg/mod/github.com/valyala/fasthttp@v1.69.0/workerpool.go:197"}
